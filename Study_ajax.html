<!DOCTYPE html>
<html>
  <head>
    <body>
      <h1 style="font-family: sans-serif;">Asynchronous Javascript and XML</h1>
      <button id="populate">Populate User Data</button>
      <table style="border:1px solid grey">
        <thead style="background-color:rgb(176, 116, 231)" style="border:1px solid grey"> 
          <tr>
            <td>ID</td>
            <td>Name</td>
            <td>Username</td>
            <td>Email</td>
          </tr>
        </thead>
        <tbody id="result_area" style="color: rgb(55, 6, 100)" style="font-family: inherit;">
          <tr style="border:1px solid grey">
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </body>
    <script>
      /* 
         Using JSONPlaceholder Fake Online REST API for Testing and Prototyping
       */
      var xhr = new XMLHttpRequest();
      xhr.open("get", "https://jsonplaceholder.typicode.com/users",true);
      // Performing AJAX call on a click of button
      document.getElementById("populate").addEventListener("click",function(){
        xhr.send();
      });
      
     /* full response is recieved if readyState is 4 */

      xhr.onreadystatechange = function() {
       
        if (xhr.readyState == 4) {
          // Get request is success,then
          if (xhr.status == 200) {
            var result_data = JSON.parse(xhr.responseText);
            console.log(result_data); 
            var html_content = "";
            for (i = 0; i < result_data.length; ++i) {
              var current_record = result_data[i];
             // Populating data in table body 
              html_content =
                html_content +
                "<tr><td>" +
                current_record.id +
                "</td> <td>" +
                current_record.name +
                "</td><td>" +
                current_record.username +
                "</td><td>" +
                current_record.email +
                "</td></tr>";
            }
            document.getElementById("result_area").innerHTML = html_content;
          }
          else{
            alert("Error");
          }
        }
      }
    </script>
  </head>
</html>
